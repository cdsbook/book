<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.313">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>An Introduction to Computing and Data for Scientists - 5&nbsp; Visualizing Data</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../src/book/06_wrangling_chapter.html" rel="next">
<link href="../../src/book/04_rmarkdown_chapter.html" rel="prev">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="../../include/webex.css">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../src/book/02_setup.html">Basic Topics</a></li><li class="breadcrumb-item"><a href="../../src/book/05_visualization_chapter.html"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Visualizing Data</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../../">An Introduction to Computing and Data for Scientists</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/book/01_intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Basic Topics</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/book/02_setup.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Setup</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/book/03_r_programming_chapter.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Introduction to R</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/book/04_rmarkdown_chapter.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Literate Programming</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/book/05_visualization_chapter.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Visualizing Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/book/06_wrangling_chapter.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Wrangling Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/book/07_ggplot_chapter.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Graphs with <code>ggplot</code></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/book/08_eda_chapter.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Exploratory Data Analysis and Scientific Discovery</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/book/09_computing_chapter.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">More about R</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/book/10_modeling_chapter.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Modeling</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/book/11_inference_chapter.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Inference</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Advanced Topics</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/book/14_reproducibility_chapter.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Reproducibility</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/book/15_loading_data_chapter.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Loading Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/book/16_more_graphs_chapter.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">More Graphs</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/book/17_inference_advanced_chapter.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">More Statistics</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/book/18_modeling_advanced_chapter.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">More Models</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/book/20_simulation_chapter.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Simulation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/book/21_prediction_chapter.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Prediction</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/book/22_deep_learning_chapter.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Deep Learning</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Scientific Data</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/book/29_online_data_chapter.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Online Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/book/33_databases_chapter.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Databases</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">Outputs</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/book/35_papers_chapter.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Papers</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/book/37_dashboards_chapter.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Dashboards</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/book/references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/book/A_faqs_appendix.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Frequently Asked Questions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../src/book/B_additional_setup_appendix.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">Additional Software Set-up</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#the-good-the-bad-and-the-ugly" id="toc-the-good-the-bad-and-the-ugly" class="nav-link active" data-scroll-target="#the-good-the-bad-and-the-ugly"><span class="header-section-number">5.1</span> The Good, the Bad, and the Ugly</a>
  <ul class="collapse">
  <li><a href="#example-challenger-disaster" id="toc-example-challenger-disaster" class="nav-link" data-scroll-target="#example-challenger-disaster"><span class="header-section-number">5.1.1</span> Example: Challenger Disaster</a></li>
  </ul></li>
  <li><a href="#data-in-r" id="toc-data-in-r" class="nav-link" data-scroll-target="#data-in-r"><span class="header-section-number">5.2</span> Data in R</a></li>
  <li><a href="#one-numerical-variable-histograms" id="toc-one-numerical-variable-histograms" class="nav-link" data-scroll-target="#one-numerical-variable-histograms"><span class="header-section-number">5.3</span> One numerical variable: histograms</a></li>
  <li><a href="#one-categorical-variable-bar-charts" id="toc-one-categorical-variable-bar-charts" class="nav-link" data-scroll-target="#one-categorical-variable-bar-charts"><span class="header-section-number">5.4</span> One categorical variable: bar charts</a></li>
  <li><a href="#two-variables-scatter-plots" id="toc-two-variables-scatter-plots" class="nav-link" data-scroll-target="#two-variables-scatter-plots"><span class="header-section-number">5.5</span> Two variables: scatter plots</a></li>
  <li><a href="#trends-line-graphs" id="toc-trends-line-graphs" class="nav-link" data-scroll-target="#trends-line-graphs"><span class="header-section-number">5.6</span> Trends: line graphs</a></li>
  <li><a href="#sec-visualization-best-practices" id="toc-sec-visualization-best-practices" class="nav-link" data-scroll-target="#sec-visualization-best-practices"><span class="header-section-number">5.7</span> Best practices for graphs</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Visualizing Data</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>In this chapter we will learn how to make simple graphs using R.</p>
<section id="the-good-the-bad-and-the-ugly" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="the-good-the-bad-and-the-ugly"><span class="header-section-number">5.1</span> The Good, the Bad, and the Ugly</h2>
<p>This video will introduce you to the importance of visualization in data science, and how it can be used effectively (or ineffectively).</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/tHEVRahx0WE?rel=0" frameborder="0" allowfullscreen="">
</iframe>
<p>Slides: <a href="https://gmuedu-my.sharepoint.com/:b:/g/personal/dwhite34_gmu_edu/ETyT0aRqt6tHspWXcGyumEgBG6K79TUuaN0mWTLsaiOySA?e=KkfEsO">PDF</a></p>
<p>There are many ways that we can visualize the same data. These pictures of data are called “graphs”. Some of these ways <em>may</em> be good, but many of them <em>will</em> be bad.</p>
<blockquote class="blockquote">
<p>A picture is worth thousand words…</p>
</blockquote>
<p>…and a good graph is clearer than a table of data.</p>
<p>In pre-modern times, our ancestors did not have to worry about tables of data (or words). But they did have to interpret patterns in what they saw.</p>
<p>We are stuck with the same brains, and so while a column of numbers doesn’t mean much, if we can transform that column into a picture then patterns can become much clearer.</p>
<p>Why create graphs?</p>
<ul>
<li>To quickly understand patterns in the data.</li>
<li>To spot problems in the data (outliers, or checking that data makes sense with your expectations)</li>
</ul>
<section id="example-challenger-disaster" class="level3" data-number="5.1.1">
<h3 data-number="5.1.1" class="anchored" data-anchor-id="example-challenger-disaster"><span class="header-section-number">5.1.1</span> Example: Challenger Disaster</h3>
<p>In 1985 the space shuttle Challenger exploded shortly after launch, killing all the astronauts on-board. An investigation found that this was probably because a rubber seal had become too cold and brittle, due to cold weather on the launch day.</p>
<p>The investigation also found that although the managers and engineers knew that this was a potential issue, they had decided to go ahead with the launch anyway. But the engineers presented their concerns to their managers in the form of tables of numbers like this. Would you have looked at this and thought “Clearly we should not launch today?”</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../img/pcssca_vol4_p671.png" title="Table of O-ring damage" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Table of O-ring damage presented to NASA by Morton Thiokol’s engineers</figcaption><p></p>
</figure>
</div>
<p>Visualization expert Edward Tufte suggested that clearer methods of presenting the data, such as a graph like this one, could have made a stronger case for delaying the launch:</p>
<div class="cell" data-hash="05_visualization_chapter_cache/html/unnamed-chunk-16_db5fa564e8ba0664bb47d00a97c27cd5">
<div class="cell-output-display">
<p><img src="05_visualization_chapter_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="data-in-r" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="data-in-r"><span class="header-section-number">5.2</span> Data in R</h2>
<p>Before we begin to make our own graphs, we need to learn some terminology for describing the underlying data.</p>

<!-- 
TODO: New video.

Topics:
Tables // data frames (were)
Rows // observations (-> and what does each one represent)
Columns // variables (vs R variables)
Types of variable: continuous vs categorical, plus discrete, ordinal, count etc. Limitations of these distinctions. How to tell the type of data in R/RStudio.
-->
<iframe width="560" height="315" src="https://www.youtube.com/embed/zM5y3dZ-o6o?rel=0" frameborder="0" allowfullscreen="">
</iframe>
<p>Slides: <a href="https://gmuedu-my.sharepoint.com/:b:/g/personal/dwhite34_gmu_edu/ETqhI64qDaFGja02KJaA_usBe0iEVyOhjM5kH7ENZswmsg?e=mg4B0G">PDF</a></p>
<!-- TODO: Written version. -->
<p>We usually want to store numerical data in tables, just like you might do with spreadsheet software like Microsoft Excel or Google Sheets. For example, instead of the separate <code>x_coords</code> and <code>y_coords</code> vectors from the graph in the previous sections, we would often be working with these as separate columns of a single table:</p>
<div id="tbl-two-points" class="anchored">
<table class="table">
<caption>Table&nbsp;5.1: Table of our 2 points</caption>
<thead>
<tr class="header">
<th style="text-align: center;">x_coords</th>
<th style="text-align: center;">y_coords</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">1</td>
<td style="text-align: center;">2</td>
</tr>
<tr class="even">
<td style="text-align: center;">3</td>
<td style="text-align: center;">4</td>
</tr>
</tbody>
</table>
</div>
<p>Because the R programming language is designed for analyzing data, it comes with a built-in data structure for storing tables of data: the <strong>dataframe</strong>.</p>
<p>We will learn how to create dataframes later in this book. For now, I will just give you pre-existing dataframes that we can analyze. If you want to follow along with these examples in RStudio, you can run this line of code in the Console:</p>
<p>That creates an R variable called <code>df</code> that holds the table of our two points. If we enter the name of the variable at the Console, R will print out the dataframe stored in the variable:</p>
<div class="cell" data-hash="05_visualization_chapter_cache/html/unnamed-chunk-3_27ec369c52ff56e1e90183f75f37a748">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  x_coords y_coords
1        1        2
2        3        4</code></pre>
</div>
</div>
<p>As you can see, this contains the same data as the table above, albeit not formatted quite as nicely (the default formatting of dataframes in R is not particularly pretty, but that is another thing we will learn to do in the future!).</p>
<p>Our dataframe is broken down into various parts:</p>
<ul>
<li><p>Each <em>row</em> represents <strong>an observation</strong> of some thing. For example, the first row represents measurements taken from one thing, and the second row represents measurements taken from a different thing.</p></li>
<li><p>Each <em>column</em> represents a different <strong>variable</strong>, or quantity that we are measuring.</p>
<ul>
<li><p>Note that we are reusing the word <em>variable</em> here. We have already encountered one type of variable in the R programming language, as a way to store and reference objects and data in our computer.</p>
<p>Now we have encountered a new use: variables as measurements from the real world, which exist as a columns in a table.</p>
<p>These two concepts of a variable are different, even though we use the same word, “variable” to refer to each of them. I will be using “variable” for both of them throughout this book, and you will need to deduce from the context whether I am talking about a programming variable in R or a column variable that measures something in the real world. (If it could be ambiguous, I might refer to an “R variable” or a “column” to prevent confusion.)</p></li>
<li><p>The columns of an R dataframe are actually vectors! I.e. a dataframe is essentially just a bunch of vectors of the same length. This means that the rules that apply to a vector also apply to a dataframe column. For example, a dataframe column can only contain one type of data (e.g.&nbsp;just numbers, or just character strings), just like a vector.</p>
<p>We can get a single column from a dataframe using the <code>$</code> operator after the dataframe’s variable. For example, to refer to the <code>x_coords</code> column from our <code>df</code> dataframe, we could write:</p>
<div class="cell" data-hash="05_visualization_chapter_cache/html/unnamed-chunk-4_bcfa003b7c89848229bf917895f65587">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>x_coords</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 3</code></pre>
</div>
</div>
<p>And we get back a vector of the two values from that column!</p></li>
</ul></li>
</ul>
<p>We have already talked about the specific types of data that the R programming language is aware of, such as numbers, character strings, and Boolean values.</p>
<p>But there are also more abstract concepts of data that a column variable can contain. For example:</p>
<ul>
<li><p><em>Continuous variables</em>: we say that a column variable is continuous if it can feasibly be any number. For example, measurements of the height of different humans is continuous, because you could be 200cm tall, or 201cm tall, or 200.5cm tall, or 200.75cm tall (etc.). The values between any two values are also valid values for a continuous variable to take on.</p></li>
<li><p><em>Discrete variables</em>: we say that a variable of numbers is discrete if it can only contain particular values. For example, the year is discrete, because it could be 2023 or 2024, but it cannot be 2023.5.</p>
<ul>
<li><em>Count variables</em> are a particular sub-type of discrete variable. As you might guess from the name, this is when the variable indicates how many there are of something.</li>
</ul></li>
<li><p><em>Categorical variables</em> contain labels, text, or something other than numbers. For example, colors (red, blue, green, etc.) would be categorical values.</p>
<ul>
<li><p>Categorical variables can be unordered, such as the color example, or…</p></li>
<li><p>They can be ordered, in which case we refer to them as <em>ordinal</em> variables. For example, if a variable of ratings can contain the values “good”, “average”, or “bad”, then this would be considered an ordinal variable since there is an ordering to these values.</p></li>
</ul></li>
</ul>
<p>Here is how these different abstract types of variables could be concretely recorded in R in the columns of a dataframe (note that we have not yet encountered all of these R data types):</p>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: center;">Type of variable</th>
<th style="text-align: center;">Type of R data</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">Continuous</td>
<td style="text-align: center;">Numerical</td>
</tr>
<tr class="even">
<td style="text-align: center;">Discrete/count</td>
<td style="text-align: center;">Numerical, integer (p.&nbsp;??)</td>
</tr>
<tr class="odd">
<td style="text-align: center;">Categorical</td>
<td style="text-align: center;">Numerical, character, factor (p.&nbsp;??)</td>
</tr>
</tbody>
</table>

<!-- TODO: some practice exercises:
* what is the observation in different tables.
* what is the type of data in different columns.
-->
</section>
<section id="one-numerical-variable-histograms" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="one-numerical-variable-histograms"><span class="header-section-number">5.3</span> One numerical variable: histograms</h2>
<p>How can we visualize a single column of data by itself? And why would we want to do this?</p>
<!-- 
TODO: New video.

Topics:
- creation with hist()
- parameters: breaks for # of bins, and picking a good number
- interpretation: shape and center, outliers
- one or two scientific examples of why we care: pareto (wealth), height (bimodal)
-->
<p>Let’s use a dataset that is included in the <code>tidyverse</code> R package which contains information about different characters from the Star Wars franchise.</p>
<!-- TODO: use a more scientific dataset than Star Wars -->
<p>You can load the dataset in RStudio by loading the <code>tidyverse</code> package (which you installed in <a href="03_r_programming_chapter.html#sec-installing-packages"><span>Section&nbsp;3.10.1</span></a>) by running <code>library(tidyverse)</code>. The dataset will then be available to you as a dataframe stored in an R variable called <code>starwars</code>.</p>
<p>Here is an example of the data stored in the <code>starwars</code> dataframe: ::: {.cell hash=‘05_visualization_chapter_cache/html/unnamed-chunk-5_069e7b90eee93c4d5945aac111f22bcd’}</p>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>starwars</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 87 × 14
   name        height  mass hair_…¹ skin_…² eye_c…³ birth…⁴ sex   gender homew…⁵
   &lt;chr&gt;        &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;  
 1 Luke Skywa…    172    77 blond   fair    blue       19   male  mascu… Tatooi…
 2 C-3PO          167    75 &lt;NA&gt;    gold    yellow    112   none  mascu… Tatooi…
 3 R2-D2           96    32 &lt;NA&gt;    white,… red        33   none  mascu… Naboo  
 4 Darth Vader    202   136 none    white   yellow     41.9 male  mascu… Tatooi…
 5 Leia Organa    150    49 brown   light   brown      19   fema… femin… Aldera…
 6 Owen Lars      178   120 brown,… light   blue       52   male  mascu… Tatooi…
 7 Beru White…    165    75 brown   light   blue       47   fema… femin… Tatooi…
 8 R5-D4           97    32 &lt;NA&gt;    white,… red        NA   none  mascu… Tatooi…
 9 Biggs Dark…    183    84 black   light   brown      24   male  mascu… Tatooi…
10 Obi-Wan Ke…    182    77 auburn… fair    blue-g…    57   male  mascu… Stewjon
# … with 77 more rows, 4 more variables: species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;, and abbreviated variable names
#   ¹​hair_color, ²​skin_color, ³​eye_color, ⁴​birth_year, ⁵​homeworld</code></pre>
</div>
<p>:::</p>
<p>We might be interested in visualizing the heights of different Star Wars characters. Maybe we want to know if there are lots of tall characters and not many short ones.</p>
<p>A graph of a single variable shows us the <strong>distribution</strong> of that variable. A good type of graph to visualize the distibution of a single continuous variable (like the <code>height</code> column) is a <strong>histogram</strong>.</p>
<p>Here is how we can create a histogram of the <code>height</code> column with the <code>plot()</code> function:</p>
<div class="cell" data-hash="05_visualization_chapter_cache/html/unnamed-chunk-6_26a3578f2e28c9109eb368d6112bcd5f">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(<span class="at">x =</span> starwars<span class="sc">$</span>height)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="05_visualization_chapter_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Note how:</p>
<ul>
<li><p>We used the <code>$</code> operator to select the <code>height</code> column as a vector of numbers to go on the x-axis.</p></li>
<li><p>The x-axis of heights has been broken up into a series of bars which we call <em>bins</em>.</p></li>
<li><p>The length of each bin is the number of observations (the “frequency”) that fall into that bin (i.e.&nbsp;the number of Star Wars characters with a height in the range of that bin).</p>
<ul>
<li>For example, the tallest bin catches the characters with a height between about 160-180 centimeters (cm). There seem to be about 28 characters in the dataset with a height in that range. (If you prefer the old Imperial measurement system, then 2.5cm is about 1 inch, so 100cm = 3’4”, 150cm = 5’, 200cm = 6’8”, etc.)</li>
</ul></li>
</ul>
<p>R has guessed the number of bins for us. Sometimes you will want to customize this, and we can override the default by setting the <code>breaks</code> parameter of the <code>hist()</code> function. For example, we can force the histogram to contain just 5 bins:</p>
<div class="cell" data-hash="05_visualization_chapter_cache/html/unnamed-chunk-7_43ffebd52f33273fa6315981dbe4eeb1">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(<span class="at">x =</span> starwars<span class="sc">$</span>height, <span class="at">breaks =</span> <span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="05_visualization_chapter_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>R will recalculate the range of the new bins, and recount how many observations fall into each bin.</p>
<!-- Modify for book and tutorial versions -->
<p><strong>Exercise:</strong> Find the tallest bin in the 5-bin histogram. What is the range of heights of Star Wars characters in this bin? Approximately how many characters are in this bin? Recall that one of the purposes of a graph is to see if the data fits our expectations - does this make sense as the most common height range to find in the Star Wars movies?</p>
<p>We can also create a histogram with a lot of bins, e.g.&nbsp;100 bins:</p>
<div class="cell" data-hash="05_visualization_chapter_cache/html/unnamed-chunk-8_7b2880acbad1660479b0b4a528b917eb">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(<span class="at">x =</span> starwars<span class="sc">$</span>height, <span class="at">breaks =</span> <span class="dv">100</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="05_visualization_chapter_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Picking the right number of bins is a bit like Goldilocks tasting porridge: there’s a sweet spot in the middle, but it’s a bit subjective.</p>
<ul>
<li><p>If we have too few bins then we destroy any patterns in the variable.</p></li>
<li><p>If we have two many bins then we see a jagged pattern caused by random variation rather than the true shape of the distribution.</p></li>
</ul>
<p>Compare these three histograms with different numbers of bins:</p>
<div class="cell" data-hash="05_visualization_chapter_cache/html/unnamed-chunk-9_e23081da97420a5ac69da8453bacecd1">
<div class="cell-output-display">
<p><img src="05_visualization_chapter_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ul>
<li><p>The middle histogram shows us that while humans (and similar-sized creatures) are predominant even a long time ago in galaxies far, far away, there is also a clump of shorter creatures with heights below 100cm.</p></li>
<li><p>However, that shape is obscured in the plot on the left with just three bins. With too few bins, we destroy any fine grained shape in the distribution.</p></li>
<li><p>It is equally hard to see the overall shape in the right-hand histogram, because there are so many bins that our eyes are distracted by the sharp transitions between neighboring bins. However, these patterns are caused by random variation, i.e.&nbsp;by accidentally having a few more Star Wars characters in one bin.</p></li>
</ul>
<!-- TODO:

How to wrap long lines of code
-->
</section>
<section id="one-categorical-variable-bar-charts" class="level2" data-number="5.4">
<h2 data-number="5.4" class="anchored" data-anchor-id="one-categorical-variable-bar-charts"><span class="header-section-number">5.4</span> One categorical variable: bar charts</h2>
<!-- TODO: video 

topics:
- comparing the counts in difference categories

-->
<p>We can also visualize the distribution of a categorical variable. We gain use a graph with bars, but whereas in a histogram we had to divide the x-axis into bins, we now have existing categories in the variable.</p>
<p>We can visualize the distribution by showing the number of values in each category (the <em>frequency</em> of each category).</p>
<p>To see how, let’s pick the <code>sex</code> variable from the <code>starwars</code> dataframe. Here’s what the first few rows looked like:</p>
<div class="cell" data-hash="05_visualization_chapter_cache/html/unnamed-chunk-10_2ac747f9aec6f748f296cafe8281626f">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">name</th>
<th style="text-align: left;">sex</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Luke Skywalker</td>
<td style="text-align: left;">male</td>
</tr>
<tr class="even">
<td style="text-align: left;">C-3PO</td>
<td style="text-align: left;">none</td>
</tr>
<tr class="odd">
<td style="text-align: left;">R2-D2</td>
<td style="text-align: left;">none</td>
</tr>
<tr class="even">
<td style="text-align: left;">Darth Vader</td>
<td style="text-align: left;">male</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Leia Organa</td>
<td style="text-align: left;">female</td>
</tr>
<tr class="even">
<td style="text-align: left;">Owen Lars</td>
<td style="text-align: left;">male</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>The first thing we need to do is count the number of values of each sex in the <code>sex</code> column. We can do this with the <code>table()</code> function:</p>
<div class="cell" data-hash="05_visualization_chapter_cache/html/unnamed-chunk-11_c6be120501ac96b6eb36d62f2417bd0a">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(starwars<span class="sc">$</span>sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
        female hermaphroditic           male           none 
            16              1             60              6 </code></pre>
</div>
</div>
<p>We can then use the <code>barplot()</code> function to make a bar graph of those frequencies:</p>
<div class="cell" data-hash="05_visualization_chapter_cache/html/unnamed-chunk-12_418046435fc74b4b05c91736bf91422c">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>h <span class="ot">&lt;-</span> <span class="fu">table</span>(starwars<span class="sc">$</span>sex)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(h)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="05_visualization_chapter_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Note that saving the table to a variable (which we have called <code>h</code>) is optional - we could instead nest the <code>table()</code> function inside the <code>barplot()</code> function like this:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">barplot</span>(<span class="fu">table</span>(starwars<span class="sc">$</span>sex))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<!-- TODO: move this to data wrangling chapter -->
<section id="nesting-vs-sequential-functions" class="level3" data-number="5.4.1">
<h3 data-number="5.4.1" class="anchored" data-anchor-id="nesting-vs-sequential-functions"><span class="header-section-number">5.4.1</span> Nesting vs sequential functions</h3>
<p>When should you nest functions and when should you run them sequentially?</p>
<p>In general, nested functions can be harder to read. It’s fine if you only have two or three, but nesting more than that results in a lot of parentheses and arguments that are hard to sort out.</p>
<p>We can instead run each function one at a time, and save the output in a new variable. However, if we only want to use that variable once (in the next function), then we end up creating a lot of variables that we don’t really need.</p>
<p>In the next chapter we will learn about a new operator (called a <em>pipe</em>) that will allow us to run functions sequentially and avoid creating lots of intermediate variables.</p>
</section>
</div>
</div>
</section>
<section id="two-variables-scatter-plots" class="level2" data-number="5.5">
<h2 data-number="5.5" class="anchored" data-anchor-id="two-variables-scatter-plots"><span class="header-section-number">5.5</span> Two variables: scatter plots</h2>
<p>When we have two or more variables, we often want to see how these variables covary, i.e.&nbsp;how does the distribution of one variable differ at different values of another variable.</p>
<p>If we have two continuous variables, then we usually visualize their <em>covariation</em> with a <strong>scatter plot</strong>. You have probably seen graphs like tis before, in which we draw dots at meeting points of <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span> values.</p>
<p>In R, we can create simple scatter plots with the <code>plot()</code> function, such as this graph of mass vs.&nbsp;weight of Star Wars characters:</p>
<div class="cell" data-hash="05_visualization_chapter_cache/html/unnamed-chunk-13_1c397ca0f42b49fb3d579b3494da41af">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="at">x =</span> starwars<span class="sc">$</span>height, <span class="at">y =</span> starwars<span class="sc">$</span>mass)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="05_visualization_chapter_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<ul>
<li><p>Note the two parameters that we pass arguments to, <code>x</code> and <code>y</code>, for the columns of data that we want to plot on the <em>x</em> and <em>y</em> axes respectively.</p></li>
<li><p>When we talk about a scatter plot of “A vs.&nbsp;B”, by convention <em>A</em> is the variable that we are plotting on the y-axis. I.e. we would say that the graph above shows “mass vs height”, not “height vs.&nbsp;mass”.</p></li>
<li><p>A final convention is that the x-axis contains the variable which we think probably explains the other one. I.e. I think it makes sense to think as height causing changes in mass, not mass causing changing in height, since an increase in height tends to make you weigh more. However, as middle age has taught me, an increase in mass does not necessarily lead to a change in height…</p></li>
</ul>
<!-- TODO: Exercises

-->
</section>
<section id="trends-line-graphs" class="level2" data-number="5.6">
<h2 data-number="5.6" class="anchored" data-anchor-id="trends-line-graphs"><span class="header-section-number">5.6</span> Trends: line graphs</h2>
<p>Another type of graph that you may encounter for two continuous variables is the line graph.</p>
<p>However, it is important to note that a line graph is not appropriate for many datasets.</p>
<p>Here’s why. When we connect points with a line, we are implying that there is some connection between those points. Typically we connect points in the direction of the x-axis, going from left to right. By drawing a line between, for example, the points (1,1) and (2,3) we are implying that a particular thing had the y-axis attribute equal to 1 when x=1, and then when <span class="math inline">\(x=2\)</span> that same thing had changed its y-axis attribute to a value of 3.</p>
<p>In other words, we should only draw a line graph to connect points if those points represent sequential observations of the same thing. A line graph shows us changes in values, whereas a scatter plot typically shows independently observed values of the same thing.</p>
<p>In would be bad, for example, to use a line graph to show the mass vs.&nbsp;height of Star Wars characters, because there is no reason to connect the point for Jabba the Hutt to the point for C-3PO<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>. These rows in the dataset are completely separate things, not two observations of the same thing. If we compare such a line graph to the previous scatter plot that we made, we can clearly see that the line graph looks awful:</p>
<div class="cell" data-hash="05_visualization_chapter_cache/html/unnamed-chunk-14_7b5e522cec997c0851c02386bc22d7a8">
<div class="cell-output-display">
<p><img src="05_visualization_chapter_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>We typically use line plots when we are measuring something repeated over time. Time is then the sequential value on the x-axis (because time in graphs always goes from left to right). A dataset that contains repeated observations of the same thing over time is called a <em>time series</em>.</p>
<p>For example, here is a scatter plot and a line graph showing the body temperature of a beaver over time. All the body temperature measurements are from the same beaver, so this is a time series and it makes sense to connect the points. In fact, it is actually easier to understand the line graph than a scatter plot of the same data, because it is hard for our brain to mentally draw the connecting lines in the scatter plot.</p>
<div class="cell" data-hash="05_visualization_chapter_cache/html/unnamed-chunk-15_f7746946e7e70e798165ee6062fb2ae1">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>beaver_1_plus <span class="ot">&lt;-</span> beaver1 <span class="sc">%&gt;%</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">hour =</span> time <span class="sc">%/%</span> <span class="dv">100</span>,</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">minutes =</span> time <span class="sc">%%</span> <span class="dv">100</span>,</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">day_and_time =</span> <span class="fu">ddays</span>(day<span class="dv">-346</span>) <span class="sc">+</span> <span class="fu">dhours</span>(hour) <span class="sc">+</span> <span class="fu">dminutes</span>(minutes)</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>))</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>  beaver_1_plus<span class="sc">$</span>day_and_time, </span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>  beaver_1_plus<span class="sc">$</span>temp, </span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">xlab =</span> <span class="st">"Time (seconds)"</span>, </span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">ylab =</span> <span class="st">"Body temperature (Celsius)"</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(</span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>  beaver_1_plus<span class="sc">$</span>day_and_time, </span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>  beaver_1_plus<span class="sc">$</span>temp, </span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">xlab =</span> <span class="st">"Time (seconds)"</span>, </span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">ylab =</span> <span class="st">"Body temperature (Celsius)"</span>, </span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">type =</span> <span class="st">"l"</span></span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="05_visualization_chapter_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>)) <span class="co"># Back to the original graphics device</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can create a line graph using the <code>plot()</code> function with the additional argument <code>type = "l"</code>, for example:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="at">x =</span> column_1, <span class="at">y =</span> column_2, <span class="at">type =</span> <span class="st">"l"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>We supply the character <code>"l"</code> to the <code>type</code> parameter to indicate that we want <strong>l</strong>ines in this graph.</p>
</section>
<section id="sec-visualization-best-practices" class="level2" data-number="5.7">
<h2 data-number="5.7" class="anchored" data-anchor-id="sec-visualization-best-practices"><span class="header-section-number">5.7</span> Best practices for graphs</h2>
<p>TODO: show some good and bad graphs to illustrate these points.</p>
<ol type="1">
<li>Communicate as much information as possible with as little ink as possible</li>
</ol>
<ul>
<li>White space is good</li>
<li>Excessive use of color is bad.</li>
<li>Fun and artistic infographics often obscure the actual data.</li>
</ul>
<ol start="2" type="1">
<li>Create graphs that meet the expectations of the viewer, and be explicit when you do something different.</li>
</ol>
<ul>
<li>Axis ranges (start at 0, or be clear if not. Don’t start elsewhere to exaggerate a small difference.)</li>
<li>Direction of data on axis. (left to right, and bottom to top)</li>
<li>Time on x-axis</li>
<li>Scales on subplots</li>
</ul>
<ol start="3" type="1">
<li>Make comparisons easy.</li>
</ol>
<ul>
<li>Lengths, not areas.</li>
<li>Side-by-side comparisons - don’t make people move things mentally to see how they are different.</li>
</ul>
<ol start="4" type="1">
<li><p>Label your graphs.</p></li>
<li><p>Avoid 3D graphs like the plague.</p></li>
</ol>


</section>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1"><p>Nobody suggest this to JJ Abrams…<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

</main> <!-- /main -->
<script>

/* update total correct if #webex-total_correct exists */
update_total_correct = function() {
  console.log("webex: update total_correct");

  var t = document.getElementsByClassName("webex-total_correct");
  for (var i = 0; i < t.length; i++) {
    p = t[i].parentElement;
    var correct = p.getElementsByClassName("webex-correct").length;
    var solvemes = p.getElementsByClassName("webex-solveme").length;
    var radiogroups = p.getElementsByClassName("webex-radiogroup").length;
    var selects = p.getElementsByClassName("webex-select").length;

    t[i].innerHTML = correct + " of " + (solvemes + radiogroups + selects) + " correct";
  }
}

/* webex-solution button toggling function */
b_func = function() {
  console.log("webex: toggle hide");

  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* check answers */
check_func = function() {
  console.log("webex: check answers");

  var cl = this.parentElement.classList;
  if (cl.contains('unchecked')) {
    cl.remove("unchecked");
    this.innerHTML = "Hide Answers";
  } else {
    cl.add("unchecked");
    this.innerHTML = "Show Answers";
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  console.log("webex: check solveme");

  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "")
  }

  if (my_answer == "") {
    cl.remove("webex-correct");
    cl.remove("webex-incorrect");
  } else if (real_answers.includes(my_answer)) {
    cl.add("webex-correct");
    cl.remove("webex-incorrect");
  } else {
    cl.add("webex-incorrect");
    cl.remove("webex-correct");
  }

  // match numeric answers within a specified tolerance
  if(this.dataset.tol > 0){
    var tol = JSON.parse(this.dataset.tol);
    var matches = real_answers.map(x => Math.abs(x - my_answer) < tol)
    if (matches.reduce((a, b) => a + b, 0) > 0) {
      cl.add("webex-correct");
    } else {
      cl.remove("webex-correct");
    }
  }

  // added regex bit
  if (cl.contains("regex")){
    answer_regex = RegExp(real_answers.join("|"))
    if (answer_regex.test(my_answer)) {
      cl.add("webex-correct");
    }
  }

  update_total_correct();
}

/* function for checking select answers */
select_func = function(e) {
  console.log("webex: check select");

  var cl = this.classList

  /* add style */
  cl.remove("webex-incorrect");
  cl.remove("webex-correct");
  if (this.value == "answer") {
    cl.add("webex-correct");
  } else if (this.value != "blank") {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

/* function for checking radiogroups answers */
radiogroups_func = function(e) {
  console.log("webex: check radiogroups");

  var checked_button = document.querySelector('input[name=' + this.id + ']:checked');
  var cl = checked_button.parentElement.classList;
  var labels = checked_button.parentElement.parentElement.children;

  /* get rid of styles */
  for (i = 0; i < labels.length; i++) {
    labels[i].classList.remove("webex-incorrect");
    labels[i].classList.remove("webex-correct");
  }

  /* add style */
  if (checked_button.value == "answer") {
    cl.add("webex-correct");
  } else {
    cl.add("webex-incorrect");
  }

  update_total_correct();
}

window.onload = function() {
  console.log("webex onload");
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('webex-solution')) {
      buttons[i].onclick = b_func;
    }
  }

  var check_sections = document.getElementsByClassName("webex-check");
  console.log("check:", check_sections.length);
  for (var i = 0; i < check_sections.length; i++) {
    check_sections[i].classList.add("unchecked");

    let btn = document.createElement("button");
    btn.innerHTML = "Show Answers";
    btn.classList.add("webex-check-button");
    btn.onclick = check_func;
    check_sections[i].appendChild(btn);

    let spn = document.createElement("span");
    spn.classList.add("webex-total_correct");
    check_sections[i].appendChild(spn);
  }

  /* set up webex-solveme inputs */
  var solveme = document.getElementsByClassName("webex-solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off");
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";

    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;

    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;

    solveme[i].insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")
  }

  /* set up radiogroups */
  var radiogroups = document.getElementsByClassName("webex-radiogroup");
  for (var i = 0; i < radiogroups.length; i++) {
    radiogroups[i].onchange = radiogroups_func;
  }

  /* set up selects */
  var selects = document.getElementsByClassName("webex-select");
  for (var i = 0; i < selects.length; i++) {
    selects[i].onchange = select_func;
    selects[i].insertAdjacentHTML("afterend", " <span class='webex-icon'></span>")
  }

  update_total_correct();
}

</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../../src/book/04_rmarkdown_chapter.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Literate Programming</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../../src/book/06_wrangling_chapter.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Wrangling Data</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>